<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capy Game - Desafie seu Conhecimento!</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="container-principal">

        <!-- TELA INICIAL: SELE√á√ÉO DE ARENAS -->
        <div id="tela-inicial" style="display: flex;">
            <h1>Capy Game - Olimp√≠ada do Conhecimento</h1>
            <p>Seja bem-vindo(a)! Escolha uma arena para come√ßar seus estudos.</p>
            <div id="tela-selecao-arena">
                <!-- As arenas ser√£o inseridas dinamicamente aqui -->
            </div>
        </div>

        <!-- TELA DE SELE√á√ÉO DE CAP√çTULOS -->
        <div id="tela-capitulos" style="display: none;">
            <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                <img src="" id="arena-icon" alt="√çcone da Arena" style="height: 60px; margin-right: 15px;">
                <div>
                    <h1 id="arena-title" style="margin: 0;">Arena</h1>
                    <p id="arena-subtitle" style="margin: 5px 0; color: #666;">Selecione um cap√≠tulo para jogar</p>
                </div>
            </div>
            
            <div id="lista-capitulos" class="capitulos-container">
                <!-- Os cap√≠tulos ser√£o inseridos dinamicamente aqui -->
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn-neutro" onclick="voltarParaArenas()">‚Üê Voltar √†s Arenas</button>
            </div>
        </div>

        <!-- TELA DE PERGUNTAS -->
        <div id="tela-pergunta" style="display:none;">
            <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                <img src="" id="header-icon" alt="√çcone da Arena" style="height: 40px; margin-right: 10px; display: none;">
                <div>
                    <h1 id="header-title" style="margin: 0;">Capy Game</h1>
                    <p id="header-capitulo" style="margin: 5px 0; color: #666; font-size: 0.9em;"></p>
                </div>
            </div>

            <div id="progress-container"><div id="progress-bar"></div></div>
            <p id="progress-text">Quest√£o 0 de 0</p>
            
            <h2 id="cabecalho-pergunta"></h2> 
            <p id="contexto-pergunta" class="contexto"></p>
            <p id="pergunta-objetiva"></p>
            
            <div id="opcoes-resposta" class="opcoes-container"></div>
            
            <div id="area-resposta-aberta" style="display:none;">
                <input type="text" id="input-resposta" class="resposta-aberta" placeholder="Digite sua resposta aqui...">
            </div>
            
            <div id="feedback-imediato" class="feedback" style="display:none;"></div>
            
            <div class="botoes-acao">
                <button id="btn-salvar" class="btn-neutro" onclick="salvarResposta()">Gravar</button>
                <button id="btn-acao" class="btn-principal" onclick="verificarResposta()">Responder</button>
                <div class="dropdown">
                    <button class="btn-neutro">Menu <span style="font-size: 0.8em;">‚ñº</span></button>
                    <div class="dropdown-content">
                        <button onclick="voltarParaCapitulos()">Voltar aos cap√≠tulos</button>
                        <button onclick="abrirAudioPlayerPopup()">Escutar podcast do cap√≠tulo</button>
                        <button onclick="registrarDiscordancia()">Questionar resposta</button>
                        <button onclick="mostrarGabarito('parcial')">Gabarito parcial</button>
                        <button onclick="mostrarGabarito('total')">Gabarito total</button>
                    </div>
                </div>
            </div>
            
            <div id="navegacao-questoes"></div>
        </div>

        <!-- TELA DE GABARITO -->
        <div id="tela-gabarito" style="display:none;">
            <h2 id="gabarito-titulo"></h2>
            <p id="gabarito-texto"></p>
            <table id="tabela-resultados">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>T√≠tulo da Quest√£o</th>
                        <th>Sua Resposta</th>
                        <th>Resposta Correta</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="corpo-tabela-resultados"></tbody>
            </table>
            <button class="btn-principal" onclick="voltarAoJogo()">Voltar ao Jogo</button>
        </div>
    </div>
    
    <!-- PLAYER DE √ÅUDIO POPUP -->
    <div id="audio-player-container" style="display:none; position:fixed; top:20px; right:20px; z-index:1000; width:400px; max-width:90vw;">
        <div id="audio-player-popup" style="background-color:white; border-radius:12px; box-shadow:0 8px 32px rgba(0,0,0,0.3); border:2px solid #3498db; overflow:hidden;">
            <!-- Barra de t√≠tulo -->
            <div style="background:#3498db; color:white; padding:12px 15px; display:flex; justify-content:space-between; align-items:center; cursor:move;" id="audio-drag-handle">
                <div style="display:flex; align-items:center; gap:8px;">
                    <span style="font-size:16px;">üéß</span>
                    <span style="font-weight:bold; font-size:14px;">Podcast</span>
                </div>
                <div style="display:flex; gap:8px;">
                    <button onclick="minimizarAudioPlayer()" style="background:rgba(255,255,255,0.2); border:none; color:white; width:24px; height:24px; border-radius:4px; cursor:pointer; font-size:14px; display:flex; align-items:center; justify-content:center;">‚àí</button>
                    <button onclick="fecharAudioPlayer()" style="background:rgba(255,255,255,0.2); border:none; color:white; width:24px; height:24px; border-radius:4px; cursor:pointer; font-size:14px; display:flex; align-items:center; justify-content:center;">√ó</button>
                </div>
            </div>
            
            <!-- Conte√∫do do player -->
            <div id="audio-player-content" style="padding:20px;">
                <div style="text-align:center; margin-bottom:20px;">
                    <h4 id="audio-title" style="margin:0 0 5px 0; color:#333; font-size:15px;">Podcast de Revis√£o</h4>
                    <p id="audio-subtitle" style="margin:0; color:#666; font-size:13px;"></p>
                </div>
                
                <!-- Controles de reprodu√ß√£o personalizados -->
                <div style="margin-bottom:15px;">
                    <!-- Bot√£o Play/Pause -->
                    <div style="display:flex; align-items:center; justify-content:center; margin-bottom:15px;">
                        <button id="play-pause-btn" onclick="togglePlayPause()" style="background:#3498db; border:none; color:white; width:50px; height:50px; border-radius:50%; cursor:pointer; font-size:20px; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 8px rgba(52,152,219,0.3);">‚ñ∂Ô∏è</button>
                    </div>
                    
                    <!-- Barra de progresso -->
                    <div style="margin-bottom:10px;">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
                            <span id="current-time" style="font-size:12px; color:#666;">0:00</span>
                            <span id="total-time" style="font-size:12px; color:#666;">0:00</span>
                        </div>
                        <div id="progress-container" onclick="seekAudio(event)" style="background:#e0e0e0; height:6px; border-radius:3px; cursor:pointer; position:relative;">
                            <div id="progress-bar" style="background:#3498db; height:100%; border-radius:3px; width:0%; transition:width 0.1s;"></div>
                            <div id="progress-handle" style="position:absolute; top:-4px; right:-6px; width:14px; height:14px; background:#3498db; border-radius:50%; cursor:pointer; transform:translateX(50%); box-shadow:0 2px 4px rgba(0,0,0,0.2);"></div>
                        </div>
                    </div>
                    
                    <!-- Controle de volume -->
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:15px;">
                        <span style="font-size:14px;">üîä</span>
                        <input type="range" id="volume-slider" min="0" max="100" value="100" onchange="changeVolume(this.value)" style="flex:1; height:4px; background:#e0e0e0; border-radius:2px; outline:none; cursor:pointer;">
                        <span id="volume-display" style="font-size:12px; color:#666; min-width:35px;">100%</span>
                    </div>
                </div>
                
                <!-- √Åudio oculto -->
                <audio id="audio-player" style="display:none;">
                    <source id="audio-source" src="" type="audio/mpeg">
                    Seu navegador n√£o suporta o elemento de √°udio.
                </audio>
                
                <!-- Bot√µes de navega√ß√£o -->
                <div style="display:flex; justify-content:center; gap:8px; flex-wrap:wrap;">
                    <button onclick="retrocederAudio(30)" style="padding:8px 12px; background:#f8f9fa; border:1px solid #dee2e6; border-radius:6px; cursor:pointer; font-size:12px; color:#495057; transition:all 0.2s;">‚è™ 30s</button>
                    <button onclick="retrocederAudio(10)" style="padding:8px 12px; background:#f8f9fa; border:1px solid #dee2e6; border-radius:6px; cursor:pointer; font-size:12px; color:#495057; transition:all 0.2s;">‚è™ 10s</button>
                    <button onclick="avancarAudio(10)" style="padding:8px 12px; background:#f8f9fa; border:1px solid #dee2e6; border-radius:6px; cursor:pointer; font-size:12px; color:#495057; transition:all 0.2s;">10s ‚è©</button>
                    <button onclick="avancarAudio(30)" style="padding:8px 12px; background:#f8f9fa; border:1px solid #dee2e6; border-radius:6px; cursor:pointer; font-size:12px; color:#495057; transition:all 0.2s;">30s ‚è©</button>
                </div>
            </div>
        </div>
    </div>
    
    <audio id="som-acerto" src="som_acerto.mp3" preload="auto"></audio>
    <audio id="som-erro" src="som_erro.mp3" preload="auto"></audio>

    <script src="Cap_10_Matematica_questoes.js"></script>
    <script src="Cap_10_Portugues_questoes.js"></script>
    <script src="Cap_06_Historia_questoes.js"></script>
    <script src="Capy_game_R0_250915.js"></script>
</body>
</html>
